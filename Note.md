# StudyPublicKeyAndPrivateKey

출처: 뱅크샐러드 (https://www.banksalad.com/contents/%EC%89%BD%EA%B2%8C-%EC%84%A4%EB%AA%85%ED%95%98%EB%8A%94-%EB%B8%94%EB%A1%9D%EC%B2%B4%EC%9D%B8-%EA%B3%B5%EA%B0%9C%ED%82%A4%EC%99%80-%EA%B0%9C%EC%9D%B8%ED%82%A4-Nhtdy)

### 공개 키와 개인 키

블록체인 상에서는 전자지갑이 기존의 지갑을 대체한다
비트코인과 개인 신원 등을 전자 지갑 안에 소유하며 디지털키, 비트코인주소, 디지털 서명 등을 통해 비트코인의 소유권이 성립된다.
모든 비트코인 거래에는 블록상의 장부에 기록되기 위해 유효한 서명(signature)이 필요하다.
이러한 서명은 디지털 키가 있어야 생성되는데, 이러한 디지털 키의 복사본만 가지고 있으면 해당계좌에서 비트코인을 관리할 수 있는데 그 키는 개인키와 공개키의 한 쌍으로 구성되어 있다.

공개키는 은행의 계좌번호와 유사하고
개인키는 비밀 PIN 혹은 계좌 관리를 위해 수표에 하는 서명과 유사하다고 보면 된다

공개키를 통해 우리는 공개된 장부인 블록상의 거래에서 해당 공개키를 가지고 있는 사람의 거래들이 참인지 거짓인지 정도를 확인할 수 있다.
개인키는 직접 거래를 발생시킬 수 있으므로 항상 보안성 높게 보관하여야 한다

이 디지털 키는 비트코인 지갑 소프트웨어를 이용해 관리한다.

여기에 더해, 비트코인 주소라는 것이 있다.
비트코인 주소는 말 그대로 대부분은 비트코인을 주고받는 공개키로부터 생성된 계좌번호라고 할 수 있다(모든 비트코인 주소가 공개키로부터 생성되는 것은 아님)


#### 개인키
개인키를 통해 공개키를 생성하고 공개키를 통해 비트코인 주소를 생성한다
하지만 공개키를 통해 개인키를 알아내거나 주소에서 공개키를 알아내는 것은 불가능하다

복잡한 연산으로 생성되는 방식으로 인해 개인키의 보안성은 한층 강화되어 개인이 주의만 한다면 충분히 안전하게 관리가 가능하다.
개인키로부터 공개키와 비트코인 주소 모두 생성이 가능하기에 개인키가 가장 핵심이라고 볼 수 있다.

개인키는 무작위로 추출한 단순 숫자로 구성되어 있는데, 이 단순하게 구성된 숫자가 정체성을 가지고 비트코인에 대한 소유권과 통제권을 갖게 한다.
즉 개인키가 노출되면 누구나 해당 비트코인을 소비할 수 있게 되는 것이다.

그렇기 때문에 개인키를 실수로 분실할 경우에 대비하여 개인키를 백업하거나 보호하는 것은 필수적이다.
개인키를 한 번 분실하게 되면 다시는 찾을 수 없고, 개인키로 묶인 비트코인 역시 영원히 찾을 수 없다.


#### 공개키
공개키는 ‘타원곡선 곱셈 함수(Elliptic Curve Cryptography)’라는 듣기에도 좀 어려운 연산과정을 거쳐 개인키로부터 계산된다.
말 그대로 누구에게나 공개된 키라 노출이 되어도 상관이 없는 데이터이다.

이 공개키는 비트코인을 전송받을 때 사용되며 또한 해당 비트코인 거래 내역의 유효성(거래가 참인지 거짓인지)을 확인하는데 사용된다.


개인키와 공개키를 가지고 비트코인을 소비하는 경우, 현재의 비트코인 소유주가 거래 내에서 공개키와 서명을 제시하면 해당 금액의 비트코인을 소비할 수 있는데,
이 공개키와 개인키를 가지고 비트코인 네트워크에 있는 모든 사람들이 이 거래를 검증하고 유효한 거래로 받아들일 수 있기 때문이다.
또한 동시에 비트코인을 전송하려는 사람이 전송 당시 비트코인을 보유하고 있었는지 여부도 확인이 가능하다.


#### 비트코인 주소
비트코인 주소는 수표처럼 돈의 수취와 관련된 정보를 요약해 보여줌으로써 비트코인 거래시 송금처를 마음대로 지정할 수 있게 된다.
즉 비트코인 주소의 데이터를 가지고 비트코인을 어디에든 보낼 수 있게 된다는 것이다.
은행의 계좌번호와 유사한 기능을 한다.


### 비트코인 거래가 이루어지는 과정

#### Step 1. 비트코인 거래 생성
- Bob이 Alice에게 1BTC를 주는 거래가 발생했다고 가정해보자
- 이것은 Bob이 Alice에게 1BTC를 전송한다는 ‘의사표시’만 한 것이지, 아직 실제로 가치가 이동하지는 않은 단계다.
- 참고) 비트코인 거래는 거래를 생성하는 사람과 거래 서명을 하는 사람이 같을 필요는 없다.
- 수표 거래와 비슷하다고 생각하면 된다.

#### Step 2. 비트코인 거래 서명
- 비트코인 거래가 생성되면, 누가 거래를 생성했든 자금원의 소유자가 해당 거래에 대한 서명을 해야 한다.
- 서명이 완료되면 비로소 이 거래가 유효해진다.
- 그리고 비트코인 송금에 필요한 모든 정보가 담겨있는 ‘거래정보’가 생겨난다.
- ‘Bob이 Alice에게 1BTC를 보낸다’는 내용이 적혀 있는 수표가 생겨난 것과 비슷하다.

#### Step 3. 비트코인 거래정보 전송
- ‘Bob이 Alice에게 1BTC를 보낸다’는 내용이 담긴 거래정보를 Bob과 Alice 둘만 알고 있어서는 거래가 성사될 수 없다.
- 이 거래정보는 비트코인 네트워크에 전송되어야 한다.
- 수많은 비트코인 노드 중 하나에 이 거래 정보가 도달해야 한다는 의미이다.
- * 노드: 블록체인을 배포하는 소프트웨어를 통해 블록체인을 다운받는 사람 또는 컴퓨터를 의미
- 참고) Bob은 노드의 무엇을 믿고 거래정보를 보내줄 수 있는 것일까?
- 정보를 제공할 때 상대방에 대한 신뢰가 없어도 가능한 3가지 이유는 다음과 같다.
- 1) 블록체인에서 거래정보가 입력된다는 것은 단순히 스크립트가 네트워크상에 업로드 되는 것이고, 이것 역시 ‘암호화(HASHING)’된 상태로 입력된다.
- 2) 기밀정보, 개인키, 인증서를 포함하지 않기 때문에 공개적으로 전송이 가능하다. 기밀정보를 포함하지 않는 거래정보를 공유하는 것이다. 거래정보가 하나의 노드에 도달하기만 하면 전세계 사람들 누구나 열람이 가능한 ‘Open source’가 될 수 있는 이유가 바로 여기에 있다.
- 3) 비트코인 소비자들과 채굴자들은 비트코인에 부여된 가치가 떨어지면 스스로가 손해다. 때문에 좋은 방향으로 합의를 보려고 하는 경제적 유인도 있다.

#### Step 4. 비트코인 거래정보 전파
- 거래정보가 일단 하나의 노드에 도달하면, 이 노드는 비트코인 네트워크 상에 있는 모든 노드에게 이 거래정보를 전파해야 한다.
- 비트코인 네트워크는 P2P를 기반으로 하기 때문에 모든 노드는 동등한 지위를 가지고 있고, 정보 하나를 수천개의 노드에 전파하는데 불과 몇 초도 걸리지 않는다.
- 비트코인 거래정보가 안전하게 남을 수 있는 이유가 바로 여기에 있다.
- 이렇게 각각의 노드들이 거래를 유효화하고, 각자가 정보 전송의 시발점이 되는 역할을 하기 때문에, 공격자가 들어오더라도 어느 곳을 공격할지 알 수 없게 되는 것이다.

#### Step 5. 비트코인 거래 완료
- 이렇게 전파되는 과정에서, 이 거래정보가 손상되지 않은 데이터인지 채굴 노드들에 의해 검증되면 비로소 이 거래정보가 영구적으로 블록에 기록된다.
- 이제 진짜로 Bob이 Alice에게 1BTC를 전송했다고 할 수 있는 것이다.
- 이렇게 기록된 정보는 이후에 위조, 변조하는 것이 불가능하다.

